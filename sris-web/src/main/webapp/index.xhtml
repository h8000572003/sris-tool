<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>

</h:head>

<h:body>





	<h1>職權更正產生器</h1>


	<h:form>
		<p:panel>

			<p:fieldset legend="產生條件">


				

				<h:panelGrid columns="2" border="0" cellspacing="5px">
					<h:outputLabel value="使用TABLE:"></h:outputLabel>
					<h:inputText value="#{exportController.dto.newTable}">
					</h:inputText>

					<h:outputLabel value="功能代碼():"></h:outputLabel>
					<h:inputText value="#{exportController.dto.newFun}">
					</h:inputText>


					<h:outputLabel value="新記錄檔:"></h:outputLabel>
					<h:inputText value="#{exportController.dto.newRec}">
					</h:inputText>

				</h:panelGrid>


				<p:commandButton value="產生" action="#{exportController.send()}"></p:commandButton>
			</p:fieldset>
		</p:panel>
	</h:form>


	<h:form>






		<p:panel>

			<p:fieldset legend="產生檔案">





				<p:dataTable var="file" value="#{exportController.dto.files}">
					<p:column headerText="檔案">
						<h:outputText value="#{file.name}" />
					</p:column>

					<p:column headerText="路徑">
						<h:outputText value="#{file.url}" />
					</p:column>


					<p:column headerText="下載">
						<p:commandButton value="Download" ajax="false"
							actionListener="#{exportController.download(file)}"
							onclick="PrimeFaces.monitorDownload(start, stop);"
							icon="ui-icon-arrowthick-1-s">
							<p:fileDownload value="#{exportController.file}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>

			</p:fieldset>

			<p:commandButton value="全部下載" ajax="false"
				actionListener="#{exportController.downloadAll()}"
				onclick="PrimeFaces.monitorDownload(start, stop);"
				icon="ui-icon-arrowthick-1-s">
				<p:fileDownload value="#{exportController.file}" />
			</p:commandButton>



		</p:panel>
	</h:form>
	<script type="text/javascript">
		function start() {
			PF('statusDialog').show();
		}

		function stop() {
			PF('statusDialog').hide();
		}
	</script>





	<h:dataTable>


	</h:dataTable>

</h:body>
</html>
